<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ù†ÙŠÙ‘ÙˆÙ† | Ù…Ù†Ø´ÙˆØ±Ø§Øª</title>
<style>
  :root{
    --bg:#04060a;
    --grid:#0ff3;
    --neon:#00eaff;
    --mag:#ff2bd6;
    --lime:#7cff6b;
    --card:#0d1220cc;
    --text:#e8f6ff;
    --muted:#9bb7c7;
    --danger:#ff5c7a;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:radial-gradient(1200px 800px at 50% 120%, #06101a 0%, #03060a 45%, #000 100%);
    color:var(--text); font-family: "Cairo", Tahoma, sans-serif; overflow-x:hidden;
  }

  /* Ø·Ø¨Ù‚Ø© Ù†Ø¬ÙˆÙ… + Ø´Ø¨ÙƒØ© Ù†ÙŠÙ‘ÙˆÙ† */
  .space{
    position:fixed; inset:0; z-index:-3; background: transparent;
  }
  canvas#stars{position:fixed; inset:0; z-index:-3;}
  .grid{
    position:fixed; inset:0; z-index:-2; pointer-events:none;
    background:
      linear-gradient(rgba(0,238,255,.08) 1px, transparent 1px) 0 0/ 100% 40px,
      linear-gradient(90deg, rgba(0,238,255,.08) 1px, transparent 1px) 0 0/ 40px 100%;
    transform: perspective(800px) rotateX(60deg) translateY(35vh);
    filter: drop-shadow(0 0 8px #00eaff55);
  }
  .scanline{
    position:fixed; inset:-2px; z-index:-1; pointer-events:none;
    background: repeating-linear-gradient(
      to bottom,
      transparent 0 2px,
      rgba(0,234,255,.03) 2px 3px
    );
    animation: flicker 6s linear infinite;
  }
  @keyframes flicker {
    0%, 100% {opacity:.85}
    47% {opacity:.9}
    50% {opacity:.75}
    53% {opacity:.95}
  }

  /* Ø±Ø£Ø³ Ø§Ù„Ù…ÙˆÙ‚Ø¹ */
  header{
    max-width:1100px; margin:24px auto 8px; padding:0 16px;
    display:flex; gap:16px; align-items:center; justify-content:space-between;
  }
  .brand{
    display:flex; align-items:center; gap:12px;
    text-shadow:0 0 10px #00eaff88, 0 0 20px #00eaff44;
  }
  .logo{
    width:44px; height:44px; border-radius:10px; position:relative; overflow:hidden;
    box-shadow:0 0 20px #00eaff66 inset, 0 0 30px #00eaff33;
    background: radial-gradient(circle at 30% 30%, #00eaff 0 40%, transparent 41%),
                conic-gradient(from 0deg, #00eaff33, #ff2bd633, #7cff6b33, #00eaff33);
  }
  h1{
    margin:0; font-size:22px; letter-spacing:.5px;
  }

  /* Ø´Ø±ÙŠØ· ÙˆØ¶Ø¹ Ø§Ù„Ø£Ø¯Ù…Ù†/Ø§Ù„Ø²Ø§Ø¦Ø± */
  .mode-pill{
    font-size:13px; color:var(--muted); background:#08111b; border:1px solid #0c2733;
    padding:8px 12px; border-radius:999px; display:flex; gap:10px; align-items:center;
  }
  .badge{ padding:3px 8px; border-radius:999px; border:1px solid #0ff6; color:#0ff; }

  /* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù…Ù‚Ø¯Ù…Ø© */
  .intro{
    max-width:1100px; margin:0 auto; padding: 8px 16px 0;
  }
  .hero{
    position:relative; overflow:hidden;
    background: linear-gradient(180deg, #0b1525cc, #0b1320aa);
    border:1px solid #143043; border-radius:20px; padding:18px;
    box-shadow: 0 0 0 1px #00eaff22 inset, 0 20px 60px #001018aa;
  }
  .hero h2{ margin:0 0 6px; font-weight:700; font-size:20px}
  .hero p{ margin:0; color:var(--muted); font-size:14px}
  .glow-ring{
    position:absolute; inset:-2px; border-radius:20px; pointer-events:none;
    box-shadow: 0 0 30px #00eaff33, inset 0 0 30px #00eaff22;
    animation: ring 5s ease-in-out infinite;
  }
  @keyframes ring { 0%,100%{opacity:.35} 50%{opacity:.9} }

  /* Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
  .container{ max-width:1100px; margin:16px auto 80px; padding:0 16px; display:grid; grid-template-columns: 1fr; gap:16px;}
  @media (min-width: 960px){ .container{ grid-template-columns: 380px 1fr; } }

  /* Ø¨Ø·Ø§Ù‚Ø© Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… */
  .card{
    background: var(--card); border:1px solid #133044; border-radius:16px; padding:16px;
    box-shadow: 0 0 0 1px #00eaff22 inset, 0 10px 40px #000a;
    backdrop-filter: blur(6px);
  }
  .card h3{margin:0 0 12px; font-size:18px}
  label{display:block; font-size:12px; color:var(--muted); margin:8px 0 6px}
  input, textarea{
    width:100%; padding:10px 12px; border-radius:10px; border:1px solid #1e3a4b;
    background:#0a1622; color:var(--text); outline:none;
    box-shadow: inset 0 0 0 1px #00eaff22;
  }
  textarea{ min-height:120px; resize:vertical }
  .row{display:grid; grid-template-columns: 1fr 1fr; gap:10px}
  .btn{
    width:100%; padding:12px; border:none; border-radius:12px; cursor:pointer; font-weight:700;
    background: linear-gradient(90deg, var(--neon), #33ffd4); color:#001015;
    box-shadow: 0 10px 24px #00eaff33, 0 0 0 1px #00eaff66 inset;
    transition: transform .2s ease, box-shadow .2s ease;
  }
  .btn:hover{ transform: translateY(-2px); box-shadow: 0 16px 30px #00eaff55, 0 0 0 1px #00eaffaa inset; }
  .btn-danger{ background: linear-gradient(90deg, #ff4f7b, #ff9a9e); color:#24000a; box-shadow: 0 10px 24px #ff5c7a44, 0 0 0 1px #ff6b8f88 inset;}
  .hint{font-size:12px; color:var(--muted)}

  /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª */
  .feed{
    display:grid; gap:12px;
  }
  .post{
    position:relative; overflow:hidden;
    background: linear-gradient(180deg, #0b1423, #0a1120);
    border:1px solid #143043; border-radius:16px; padding:14px 14px 12px;
    box-shadow: 0 0 0 1px #00eaff22 inset, 0 12px 40px #000a;
  }
  .post::after{
    content:""; position:absolute; inset:-1px; border-radius:16px; pointer-events:none;
    background: conic-gradient(from 0deg, #00eaff22, transparent 10%, transparent 80%, #ff2bd622);
    mask: linear-gradient(#000, transparent 60%);
    animation: sweep 6s linear infinite;
  }
  @keyframes sweep { to { transform: rotate(1turn);} }
  .meta{display:flex; gap:10px; align-items:center; color:var(--muted); font-size:12px}
  .dot{width:6px; height:6px; border-radius:50%; background: var(--neon); box-shadow: 0 0 8px var(--neon)}
  .title{font-weight:700; font-size:16px; margin:6px 0 6px}
  .body{white-space:pre-wrap; color:var(--text); font-size:14px}
  .img-wrap{margin-top:10px; border-radius:12px; overflow:hidden; border:1px solid #113042}
  .img-wrap img{display:block; width:100%; height:auto; transform: scale(1.01); transition: transform .4s ease}
  .img-wrap:hover img{ transform: scale(1.05) }
  .actions{display:flex; gap:8px; margin-top:10px}
  .small{font-size:11px; color:var(--muted)}
  .del{background:transparent; border:1px solid #ff6b8f88; color:#ff9db2; padding:8px 10px; border-radius:10px; cursor:pointer}
  .del:hover{ background:#ff6b8f22 }

  footer{
    max-width:1100px; margin:24px auto 32px; padding:0 16px; opacity:.8; color:var(--muted); font-size:12px;
    display:flex; justify-content:space-between; align-items:center; gap:12px;
  }
  .link{
    color:#9be7ff; text-decoration:none; border-bottom:1px dashed #00eaff66; padding-bottom:2px;
  }
</style>
<!-- Ø®Ø· Ø§Ø®ØªÙŠØ§Ø±ÙŠ -->
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>

<!-- Ø®Ù„ÙÙŠØ©: Ù†Ø¬ÙˆÙ… + Ø´Ø¨ÙƒØ© + Ø³Ø·Ø± Ù…Ø³Ø­ -->
<canvas id="stars"></canvas>
<div class="grid"></div>
<div class="scanline"></div>

<header>
  <div class="brand">
    <div class="logo"></div>
    <h1>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ù†ÙŠÙ‘ÙˆÙ†</h1>
  </div>
  <div class="mode-pill">
    <span>Ø§Ù„ÙˆØ¶Ø¹:</span>
    <span id="modeBadge" class="badge">Ø²Ø§Ø¦Ø±</span>
  </div>
</header>

<section class="intro">
  <div class="hero">
    <div class="glow-ring"></div>
    <h2>Ù…Ù†ØµØ© Ø£Ø®Ø¨Ø§Ø±/ÙØ¹Ø§Ù„ÙŠØ§Øª Ø¨Ù†ÙÙÙØ³ Ø®ÙŠØ§Ù„ Ø¹Ù„Ù…ÙŠ</h2>
    <p>Ø§Ù†Ø´Ø± ØªØ­Ø¯ÙŠØ«Ø§ØªÙƒØŒ ØµÙˆØ±ÙƒØŒ Ø£Ùˆ Ø£ÙŠ Ø­Ø¯Ø« Ù…Ù‡Ù…. Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ØªØªØ­Ø¯Ø« ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ù„Ù„Ø¬Ù…ÙŠØ¹ ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù„Ø­Ø¸Ø©.</p>
  </div>
</section>

<main class="container">
  <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† -->
  <aside id="adminCard" class="card" style="display:none;">
    <h3>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ‘Ù…</h3>
    <div class="row">
      <div>
        <label>Ø§Ø³Ù…Ùƒ (ÙŠØ¸Ù‡Ø± Ù…Ø¹ Ø§Ù„Ù…Ù†Ø´ÙˆØ±)</label>
        <input id="author" placeholder="Ù…Ø«Ø§Ù„: Ø¹ØµØ§Ù…">
      </div>
      <div>
        <label>ÙƒÙ„Ù…Ø© Ø³Ø± Ø§Ù„Ø£Ø¯Ù…Ù†</label>
        <input id="adminPass" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢">
      </div>
    </div>
    <label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
    <input id="title">
    <label>Ø§Ù„Ù…Ø­ØªÙˆÙ‰</label>
    <textarea id="content"></textarea>
    <label>Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
    <input id="imageUrl" placeholder="https://...jpg">
    <div class="row" style="margin-top:10px">
      <button id="publishBtn" class="btn">Ù†Ø´Ø± Ø§Ù„Ø¢Ù†</button>
      <button id="clearBtn" class="btn btn-danger" title="ØªÙØ±ÙŠØº Ø§Ù„Ø­Ù‚ÙˆÙ„">Ù…Ø³Ø­ Ø§Ù„Ø­Ù‚ÙˆÙ„</button>
    </div>
    <p class="hint">Ù†ØµÙŠØ­Ø©: Ø§Ø³ØªØ®Ø¯Ù… ØµÙˆØ±Ù‹Ø§ Ø¨ØµÙŠØºØ© JPG/WEBP Ø®ÙÙŠÙØ© Ù„ØªØ­Ù…ÙŠÙ„ Ø£Ø³Ø±Ø¹.</p>
  </aside>

  <!-- Ø§Ù„Ø®Ù„Ø§ØµØ© -->
  <section class="card">
    <h3 style="margin-bottom:12px">Ø§Ù„Ø®Ù„Ø§ØµØ© Ø§Ù„Ø­ÙŠÙ‘Ø©</h3>
    <div id="feed" class="feed"></div>
    <p id="emptyHint" class="small" style="display:none">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø¨Ø¹Ø¯.</p>
  </section>
</main>

<footer>
  <span>Â© Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ù†ÙŠÙ‘ÙˆÙ† â€” ÙŠØ¹Ù…Ù„ Ø¨Ø§Ù„Ø²Ù…Ù† Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ø¹Ø¨Ø± Firestore</span>
  <a class="link" href="https://www.instagram.com/1x_x.issam.x_x5" target="_blank" rel="noopener">Ø¥Ù†Ø³ØªØºØ±Ø§Ù… Ø¹ØµØ§Ù…</a>
</footer>

<!-- (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) ØªØ´ØºÙŠÙ„ Ø£ØºÙ†ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§: Ø¶Ø¹ song.mp3 Ø¨Ø¬Ø§Ù†Ø¨ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù Ø«Ù… Ø£Ø²Ù„ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚
<audio autoplay loop>
  <source src="song.mp3" type="audio/mpeg">
</audio>
-->

<!-- Firebase (Modular v10) -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import {
    getFirestore, collection, addDoc, doc, deleteDoc,
    serverTimestamp, onSnapshot, query, orderBy
  } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  /* === Firebase Config (Ø®Ø§Øµ Ø¨Ù…Ø´Ø±ÙˆØ¹Ùƒ) === */
  const firebaseConfig = {
    apiKey: "AIzaSyBPT2x-K5vXxdLgnaE0IupksEtRY9mTLCM",
    authDomain: "isjsjdj-3a3bb.firebaseapp.com",
    projectId: "isjsjdj-3a3bb",
    storageBucket: "isjsjdj-3a3bb.firebasestorage.app",
    messagingSenderId: "326900346988",
    appId: "1:326900346988:web:09148de2e8f7b2a152a849",
    measurementId: "G-DE0ZXG9K2M"
  };
  const app = initializeApp(firebaseConfig);
  const db  = getFirestore(app);

  /* === Ø¹Ù†Ø§ØµØ± DOM === */
  const feedEl = document.getElementById("feed");
  const emptyHint = document.getElementById("emptyHint");
  const adminCard = document.getElementById("adminCard");
  const modeBadge = document.getElementById("modeBadge");
  const authorEl = document.getElementById("author");
  const passEl = document.getElementById("adminPass");
  const titleEl = document.getElementById("title");
  const contentEl = document.getElementById("content");
  const imageEl = document.getElementById("imageUrl");
  const publishBtn = document.getElementById("publishBtn");
  const clearBtn = document.getElementById("clearBtn");

  /* === ÙˆØ¶Ø¹ Ø§Ù„Ø£Ø¯Ù…Ù† Ø¹Ø¨Ø± ?admin === */
  let isAdmin = false;
  const url = new URL(window.location.href);
  if (url.searchParams.has("admin")) {
    adminCard.style.display = "block";
    modeBadge.textContent = "Ø£Ø¯Ù…Ù†";
    modeBadge.style.color = "#021012";
    modeBadge.style.background = "linear-gradient(90deg,#00eaff,#7cff6b)";
    modeBadge.style.borderColor = "#00eaff";
    isAdmin = true;
  }

  /* === Ù†Ø´Ø± Ù…Ù†Ø´ÙˆØ± === */
  publishBtn?.addEventListener("click", async () => {
    if (!isAdmin) return alert("Ø§ÙØªØ­ Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† Ø¹Ø¨Ø± ?admin");
    if (passEl.value !== "121212") return alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ØºÙŠØ± ØµØ­ÙŠØ­Ø©");

    const data = {
      author: (authorEl.value || "Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…").trim(),
      title: (titleEl.value || "").trim(),
      body: (contentEl.value || "").trim(),
      image: (imageEl.value || "").trim(),
      createdAt: serverTimestamp()
    };
    if (!data.title && !data.body) return alert("Ø§ÙƒØªØ¨ Ø¹Ù†ÙˆØ§Ù†Ù‹Ø§ Ø£Ùˆ Ù…Ø­ØªÙˆÙ‰Ù‹ Ø£ÙˆÙ„Ø§Ù‹.");

    await addDoc(collection(db, "posts"), data);
    titleEl.value = ""; contentEl.value = ""; imageEl.value = "";
  });

  clearBtn?.addEventListener("click", () => {
    titleEl.value = ""; contentEl.value = ""; imageEl.value = "";
  });

  /* === Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª (Realtime) === */
  const q = query(collection(db, "posts"), orderBy("createdAt", "desc"));
  onSnapshot(q, (snap) => {
    feedEl.innerHTML = "";
    if (snap.empty) { emptyHint.style.display = "block"; return; }
    emptyHint.style.display = "none";

    snap.forEach((d) => {
      const p = d.data();
      const card = document.createElement("article");
      card.className = "post";

      const meta = document.createElement("div");
      meta.className = "meta";
      meta.innerHTML = `<span class="dot"></span><span>${p.author || "Ù…Ø¬Ù‡ÙˆÙ„"}</span>`;
      card.appendChild(meta);

      if (p.title) {
        const t = document.createElement("div");
        t.className = "title";
        t.textContent = p.title;
        card.appendChild(t);
      }

      if (p.body) {
        const b = document.createElement("div");
        b.className = "body";
        b.textContent = p.body;
        card.appendChild(b);
      }

      if (p.image) {
        const w = document.createElement("div");
        w.className = "img-wrap";
        const img = document.createElement("img");
        img.src = p.image;
        img.alt = p.title || "ØµÙˆØ±Ø©";
        w.appendChild(img);
        card.appendChild(w);
      }

      if (isAdmin) {
        const actions = document.createElement("div");
        actions.className = "actions";
        const del = document.createElement("button");
        del.className = "del";
        del.textContent = "ğŸ—‘ï¸ Ø­Ø°Ù";
        del.addEventListener("click", async () => {
          if (confirm("Ø­Ø°Ù Ø§Ù„Ù…Ù†Ø´ÙˆØ±ØŸ")) await deleteDoc(doc(db, "posts", d.id));
        });
        actions.appendChild(del);
        card.appendChild(actions);
      }

      feedEl.appendChild(card);
    });
  });

  /* === Ù†Ø¬ÙˆÙ… Ù…ØªØ­Ø±ÙƒØ© Ø¹Ù„Ù‰ Canvas === */
  const cvs = document.getElementById("stars");
  const ctx = cvs.getContext("2d");
  let W, H, stars = [];
  const STAR_COUNT = 160;

  function resize(){
    W = cvs.width = window.innerWidth;
    H = cvs.height = window.innerHeight;
    stars = Array.from({length: STAR_COUNT}, () => ({
      x: Math.random()*W,
      y: Math.random()*H,
      z: Math.random()*1 + .2,
      r: Math.random()*1.1 + .2
    }));
  }
  window.addEventListener("resize", resize);
  resize();

  function draw(){
    ctx.clearRect(0,0,W,H);
    // Ø®Ù„ÙÙŠØ© Ø®ÙÙŠÙØ© Ø¬Ø¯Ø§Ù‹
    ctx.fillStyle = "#000000";
    ctx.fillRect(0,0,W,H);

    // Ù†Ø¬ÙˆÙ…
    for (const s of stars){
      ctx.beginPath();
      ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
      ctx.fillStyle = "rgba(0,234,255,.85)";
      ctx.shadowColor = "#00eaff";
      ctx.shadowBlur = 8;
      ctx.fill();
      // Ø­Ø±ÙƒØ© Ø¨Ø·ÙŠØ¦Ø©
      s.y += s.z * 0.4;
      if (s.y > H) { s.y = -4; s.x = Math.random()*W; }
    }
    requestAnimationFrame(draw);
  }
  draw();
</script>
</body>
</html>
